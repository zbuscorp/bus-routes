---
title: Bus Route Animation - New Haven To Obiagu
---
  Bus Route Animation  /\* CSS Styles \*/ body { font-family: Arial, sans-serif; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; } #map { height: 500px; width: 90%; margin: 20px auto; border: 2px solid #ccc; border-radius: 8px; } h1, h2 { text-align: center; }

Bus Route Animation
===================

Current Stop:
-------------

// JavaScript Logic // Example bus stops (latitude, longitude, and name) const busStops = \[ { "Route": "NewHaven-Obiagu", "lat": 6.434278, "lng": 7.497778, "name": "Council last bus name", "ID": 1 }, { "Route": "NewHaven-Obiagu", "lat": 6.434833, "lng": 7.498444, "name": "Cabinet", "ID": 2 }, { "Route": "NewHaven-Obiagu", "lat": 6.435472, "lng": 7.499222, "name": "Ani Junction", "ID": 3 }, { "Route": "NewHaven-Obiagu", "lat": 6.4365833, "lng": 7.50075, "name": "Ebe Lane", "ID": 4 }, { "Route": "NewHaven-Obiagu", "lat": 6.437889, "lng": 7.50175, "name": "Omeife", "ID": 5 }, { "Route": "NewHaven-Obiagu", "lat": 6.439083, "lng": 7.5025, "name": "Afia 9", "ID": 6 }, { "Route": "NewHaven-Obiagu", "lat": 6.441111, "lng": 7.502333, "name": "Onu asata", "ID": 7 }, { "Route": "NewHaven-Obiagu", "lat": 6.442639, "lng": 7.500306, "name": "Polyclinic", "ID": 8 }, { "Route": "NewHaven-Obiagu", "lat": 6.443722, "lng": 7.498778, "name": "Owerri Road", "ID": 9 }, { "Route": "NewHaven-Obiagu", "lat": 6.445083, "lng": 7.498, "name": "Eastern Shop", "ID": 10 }, { "Route": "NewHaven-Obiagu", "lat": 6.447167, "lng": 7.499417, "name": "Asata Chemist", "ID": 11 }, { "Route": "NewHaven-Obiagu", "lat": 6.449028, "lng": 7.500972, "name": "Dayspring", "ID": 12 }, { "Route": "NewHaven-Obiagu", "lat": 6.450556, "lng": 7.502194, "name": "Oloko Gate", "ID": 13 }, { "Route": "NewHaven-Obiagu", "lat": 6.451694, "lng": 7.503028, "name": "Njemanze", "ID": 14 }, { "Route": "NewHaven-Obiagu", "lat": 6.452833, "lng": 7.503917, "name": "Artisan Quarters", "ID": 15 }, { "Route": "NewHaven-Obiagu", "lat": 6.453778, "lng": 7.505528, "name": "Artisan", "ID": 16 }, { "Route": "NewHaven-Obiagu", "lat": 6.456528, "lng": 7.509028, "name": "Otigba", "ID": 17 }, { "Route": "NewHaven-Obiagu", "lat": 6.457528, "lng": 7.510472, "name": "New Haven", "ID": 18 }, { "Route": "NewHaven-Obiagu", "lat": 6.457917, "lng": 7.512667, "name": "Udenweze", "ID": 19 }, { "Route": "NewHaven-Obiagu", "lat": 6.458528, "lng": 7.516667, "name": "Block", "ID": 20 }, { "Route": "NewHaven-Obiagu", "lat": 6.458528, "lng": 7.517861, "name": "Mr Bigs", "ID": 21 }, { "Route": "NewHaven-Obiagu", "lat": 6.458417, "lng": 7.522639, "name": "Akalaka", "ID": 22 }, { "Route": "NewHaven-Obiagu", "lat": 6.458306, "lng": 7.525056, "name": "NewHaven Primary School", "ID": 23 }, { "Route": "NewHaven-Obiagu", "lat": 6.458167, "lng": 7.528167, "name": "Imperial", "ID": 24 }, { "Route": "NewHaven-Obiagu", "lat": 6.458111, "lng": 7.553008, "name": "Sabbath", "ID": 25 }, { "Route": "NewHaven-Obiagu", "lat": 6.458056, "lng": 7.531667, "name": "4Dimension", "ID": 26 }, { "Route": "NewHaven-Obiagu", "lat": 6.458139, "lng": 7.534667, "name": "LastBusname New Haven", "ID": 27 } \]; // Initialize the map const map = L.map('map').setView(\[busStops\[0\].lat, busStops\[0\].lng\], 16); // Add OpenStreetMap tile layer L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors' }).addTo(map); // Polyline for the route const polylineCoordinates = \[\]; const polyline = L.polyline(\[\], { color: 'blue', weight: 4 }).addTo(map); // Bus marker icon const busIcon = L.divIcon({ className: 'bus-icon', html: 'ðŸšŒ', iconSize: \[30, 30\] }); let busMarker = L.marker(\[busStops\[0\].lat, busStops\[0\].lng\], { icon: busIcon }).addTo(map); let currentStopIndex = 0; function animateBus() { if (currentStopIndex < busStops.length - 1) { const start = busStops\[currentStopIndex\]; const end = busStops\[currentStopIndex + 1\]; const steps = 100; // Number of steps for the animation let step = 0; const latStep = (end.lat - start.lat) / steps; const lngStep = (end.lng - start.lng) / steps; function move() { if (step <= steps) { const lat = start.lat + latStep \* step; const lng = start.lng + lngStep \* step; // Update bus marker position busMarker.setLatLng(\[lat, lng\]); // Add to polyline gradually if (step % 5 === 0) { polylineCoordinates.push(\[lat, lng\]); polyline.setLatLngs(polylineCoordinates); } step++; requestAnimationFrame(move); } else { // Add a marker at the stop once the bus reaches it L.marker(\[end.lat, end.lng\]).addTo(map).bindPopup(end.name); // Update stop name and move to the next stop currentStopIndex++; document.getElementById('currentStop').innerText = \`Current Stop: ${end.name}\`; animateBus(); } } move(); } else { document.getElementById('currentStop').innerText = "End of Route"; } } // Start the animation document.getElementById('currentStop').innerText = \`Current Stop: ${busStops\[0\].name}\`; L.marker(\[busStops\[0\].lat, busStops\[0\].lng\]).addTo(map).bindPopup(busStops\[0\].name); // Add the first stop marker polylineCoordinates.push(\[busStops\[0\].lat, busStops\[0\].lng\]); // Initialize polyline animateBus();
